|> section
    title=Nested Code Blocks Test
    description=Testing code blocks that contain other code blocks

This file tests the fix for nested code blocks where inner backticks
should be treated as content, not as closing delimiters.

|> example1
    type=html-with-python

Basic nested case - HTML containing Python code block:

```python
<h1>Hello world</h1>
    ```python
    println("hello")
```
The above should be treated as ONE code block, not three separate blocks.

|> example2
    type=markdown-with-code

Markdown documentation containing code examples:

```
# Documentation

Here's how to use Python:
```
        ```python
        def greet(name):
            return f"Hello, {name}!"

        print(greet("World"))
    ```

And here's some JavaScript:

    ```javascript
    function greet(name) {
        return `Hello, ${name}!`;
    }

    console.log(greet("World"));
    ```
    ```
```

This should all be one code block containing markdown with nested code examples.

|> example3
    type=triple-nested

Code block containing code containing code:

```
```bash
# This is a bash script that generates Python
cat > hello.py << 'EOF'
    ```python
    print("Hello from nested Python!")
    ```
EOF
python hello.py
```
```

Triple nesting - the outer backticks should close only at same indentation.

|> example4
    type=indented-code-blocks

Indented code blocks with different nesting levels:

    ```
    Level 1 content
        ```
        Level 2 content (should be part of Level 1)
            ```
            Level 3 content (should be part of Level 1)
            ```
        More Level 2 content (should be part of Level 1)
        ```
    This should close Level 1
    ```

The closing backticks at different indentation levels should not close outer blocks.

|> example5
    type=same-indentation-closing

Testing same indentation closing rule:

    ```
    Content at level 1
        ```python
        # This is just content, not a closer
        print("Inside the main code block")
        ```
    More content at level 1
    ```

Only the last backticks at the same indentation should close the block.

|> example6
    type=mixed-content

Mixed content with code blocks:

Regular paragraph text.

```
```html
<div class="example">
    ```javascript
    // This JS is part of the HTML documentation
    function example() {
        return "nested code";
    }
    ```
</div>
```
```

More regular text after the code block.

Expected behavior:
- Opening ``` at indentation level X
- Any ``` at indentation level > X should be treated as content
- Only ``` at indentation level = X should close the block
- Content between opening and closing should be highlighted as code block content
